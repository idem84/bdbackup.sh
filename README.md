# BDBACKUP.SH
##Shell Script для автоматического создания бэкапов баз данных MYSQL.

Сам скрипт и все ниже описанное подразумевает собой что Вы будете делать резервное копирование баз данных MYSQL из под **root** пользователя.

Для работы синхронизации с удаленным FTP бэкап файлов в данном скрипте, Вам понадобиться установка программы **lftp** на сервер: [http://lftp.yar.ru/get.html](http://lftp.yar.ru/get.html)

###Шаг первый 1: Установите программу lftp:

Например если у Вас CentOS:

```html
yum install lftp
```

###Шаг второй 2: Создайте необходимые папки в нужных директориях:
Наши файлы будут храниться внутри папки **/tmp**.
Тут есть один нюанс, на некоторых OS или при определенных настройках, все папки и файлы внутри папки **/tmp** могут удалиться на сервере, например при перезагрузке сервера. Если у Вас так, то создайте все эти папки внутрии папки **/root** и измените пути в скрипте.

```html
mkdir /tmp/backups
mkdir /tmp/backups/mysql
```
###Шаг третий 3: Поместите файл bdbackup.sh в /root директорию
Сделайте на файл нужные права для выполнения скрипта:

```html
chmod +x /root/bdbackup.sh
```

###Шаг четвертый 4: В консоли вводим команду:

```html
crontab -e
```
Если вылезла ошибка что сервис не найден, Вам нужно установить cron на сервере, например краткая инструкция установки для **CentOS**:

```html
yum install crontabs -y
chkconfig crond on
touch /var/spool/cron/root
service crond start
crontab -e
```

Далее переходим в режим редактирования **i** и указываем в файле почту на которую будет присылаться информация о ходе выполнения бэкапа баз данных на сайте, время и переодичность запуска скрипта:

```html
MAILTO="alert@site.ru"
0 */4 * * * /root/bdbackup.sh
```

В данном случае указано запускать скрипт каждые 4 часа.

Выходит из редактирования **Esc**, вводим команду **:wq** и жмем **Enter**.

Все готово.
